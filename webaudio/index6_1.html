<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
</head>
<body>
  <h1>Web Audio fun</h1>
  <button id="playNote">Play Note</button>
  <div>
    <label>
      Attack (ms)
      <input id="attackSlider" type="range" min="10" max="2000" value="200">
    </label>
  </div>
  <div>
    <label>
      Release (ms)
      <input id="releaseSlider" type="range" min="10" max="2000" value="200">
    </label>
  </div>
  <script>
    const c = new AudioContext();
    const o = c.createOscillator();
    const g = c.createGain();
    const attackSlider = document.getElementById('attackSlider');
    const releaseSlider = document.getElementById('releaseSlider');
    
    o.connect(g);
    g.connect(c.destination);
    
    o.frequency.value = 440;
    g.gain.value = 0;
    
    o.start();
    
    document.getElementById('playNote').addEventListener('click', async () => {
      await c.resume();
      const now = c.currentTime;
      const attack = attackSlider.value / 1000;
      const release = releaseSlider.value / 1000;
      g.gain.cancelScheduledValues(now);
      g.gain.setValueAtTime(0, now);
      g.gain.linearRampToValueAtTime(1, now + attack);
      g.gain.linearRampToValueAtTime(0, now + attack + release);
    });
    
  </script>
</body>
</html>
